<ui:composition template="/WEB-INF/templates/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:b="http://bootsfaces.net/ui"
                xmlns:passthrough="http://xmlns.jcp.org/jsf/passthrough">
    <ui:define name="title">Altenerding Handball</ui:define>

    <ui:define name="content">
        <b:modal id="modalAddAccnouncement" title="Ankündigung hinzufügen" styleClass="modalPseudoClass">
            <h:form id="addAccouncmentFormId">
                <b:inputTextarea value="#{announcementProcessingBean.anncouncement.text}"/>

                <b:button value="Abbrechen" look="danger" dismiss="modal"/>
                <b:commandButton value="Speichern" look="success" passthrough:data-dismiss="modal" ajax="true"
                                 action="index.xhtml"
                                 update="@form:announcementListFormId @form:announcementMessagesFormId"
                                 actionListener="#{announcementProcessingBean.saveAnnouncement()}"/>
            </h:form>
        </b:modal>

        <b:modal id="modalEditAccnouncement" title="Ankündigung bearbeiten" styleClass="modalPseudoClass">
            <h:form id="editAccouncmentFormId">
                <b:inputTextarea id="editAccnouncementText"
                                 value="#{announcementProcessingBean.anncouncement.text}"/>

                <b:button value="Abbrechen" look="danger" dismiss="modal"/>
                <b:commandButton value="Speichern" look="success" passthrough:data-dismiss="modal" ajax="true"
                                 action="index.xhtml"
                                 update="@form:announcementListFormId @form:announcementMessagesFormId"
                                 actionListener="#{announcementProcessingBean.saveEditedAnnouncement()}"/>
            </h:form>
        </b:modal>
        <b:modal id="modalRemoveAccnouncement" title="Ankündigung löschen" styleClass="modalPseudoClass">
            <h:form id="removeAccouncmentFormId">
                <b:inputTextarea id="removeAccnouncementText" disabled="true"
                                 value="#{announcementProcessingBean.anncouncement.text}"/>

                <b:button value="Abbrechen" look="danger" dismiss="modal"/>
                <b:commandButton value="Löschen" look="success" passthrough:data-dismiss="modal" ajax="true"
                                 action="index.xhtml"
                                 update="@form:announcementListFormId @form:announcementMessagesFormId"
                                 actionListener="#{announcementProcessingBean.deleteAnnouncement()}"/>
            </h:form>
        </b:modal>

        <b:container>
            <b:jumbotron>
                <p>Willkommen auf der neuen Altenerding Biber Homepage</p>
            </b:jumbotron>

            <b:panel title="Ankündigungen">
                <b:panel rendered="#{sessionBean.isLoggedIn}">
                    <b:button value="Ankündigung hinzufügen" look="primary" rendered="#{sessionBean.isLoggedIn}"
                              passthrough:data-target="#modalAddAccnouncement" passthrough:data-toggle="modal"
                              size="sm"/>
                </b:panel>
                <h:form id="announcementListFormId">
                    <ui:repeat id="repeatAnnouncementId" value="#{announcementBean.announcements}" var="announcement">
                        <b:panel collapsible="false">
                            <b:row style="margin: 0px">
                                <h:outputText value="#{announcement.text}"/><br/>
                            </b:row>
                            <b:row>
                                <b:column span="2" style="margin-top: 5px">
                                    <b:commandButton rendered="#{sessionBean.isLoggedIn}"
                                                     actionListener="#{announcementProcessingBean.setAnncouncement(announcement)}"
                                                     size="sm" passthrough:data-target="#modalEditAccnouncement"
                                                     passthrough:data-toggle="modal"
                                                     update="@form:editAccouncmentFormId"
                                                     disabled="false" value="Bearbeiten" look="success" icon="pencil"
                                                     iconAlign="right"/>
                                </b:column>
                                <b:column span="2" style="margin-top: 5px">
                                    <b:commandButton rendered="#{sessionBean.isLoggedIn}"
                                                     actionListener="#{announcementProcessingBean.setAnncouncement(announcement)}"
                                                     size="sm" passthrough:data-target="#modalRemoveAccnouncement"
                                                     passthrough:data-toggle="modal"
                                                     update="@form:removeAccouncmentFormId"
                                                     disabled="false" value="Löschen" look="danger" icon="remove"
                                                     iconAlign="right"/>
                                </b:column>
                            </b:row>
                        </b:panel>
                    </ui:repeat>
                </h:form>
            </b:panel>

            <b:panel title="Bild der Woche" collapsible="true">
                <h:graphicImage value="#{announcementBean.getImageOfWeekFullPath()}"
                                style="max-height: 100%; max-width: 100%"/>
            </b:panel>
        </b:container>
    </ui:define>
</ui:composition>